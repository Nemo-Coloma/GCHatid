<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ride Selector</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
                Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .ride-selector-container {
            width: 90%;
            max-width: 900px;
            background-color: #fff;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        #map {
            width: 100%;
            height: 400px;
            border-radius: 20px 20px 0 0;
        }
        .selector-row {
            display: flex;
            justify-content: space-between;
            padding: 20px 30px;
        }
        .selector-half {
            flex-basis: 50%;
            padding: 10px 20px;
        }
        .selector-header {
            font-size: 1.25rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
            border-bottom: 2px solid #eee;
            padding-bottom: 5px;
        }
        .location-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .location-option {
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            background-color: #f9f9f9;
            color: #555;
            font-size: 1rem;
        }
        .location-option:hover {
            border-color: #007bff;
            background-color: #e6f2ff;
        }
        .location-option.selected {
            background-color: #007bff;
            color: white;
            border-color: #007bff;
            font-weight: 500;
            box-shadow: 0 2px 8px rgba(0, 123, 255, 0.2);
        }
        .vertical-divider {
            width: 1px;
            background-color: #ddd;
            margin: 10px 0;
        }
        @media (max-width: 600px) {
            .selector-row {
                flex-direction: column;
                padding: 15px;
            }
            .vertical-divider {
                width: 100%;
                height: 1px;
                margin: 15px 0;
            }
            .selector-half {
                padding: 5px 0;
            }
        }
    </style>
</head>
<body>
    <div class="ride-selector-container">
        <div id="map"></div>
        <div class="selector-row">
            <div class="selector-half">
                <div class="selector-header">Pick-up Location</div>
                <div class="location-options" id="locationOptions">
                    <div class="location-option" data-lat="14.832" data-lng="120.282">Gordon College Main Campus</div>
                    <div class="location-option" data-lat="14.829" data-lng="120.284">Gordon College ANNEX Campus</div>
                </div>
            </div>
            <div class="vertical-divider"></div>
            <div class="selector-half">
                <div class="selector-header">Choose Driver</div>
                <p style="color: #888;">Select a Pick-up Location first.</p>
            </div>
        </div>
    </div>
    <script>
        // Initialize Leaflet map
        const map = L.map('map');
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        // Campus markers
        const mainLatLng = [14.837753,120.280249];
        const annexLatLng = [14.832407,120.283448];

        const mainMarker = L.marker(mainLatLng).addTo(map)
            .bindPopup('Gordon College Main Campus');
        const annexMarker = L.marker(annexLatLng).addTo(map)
            .bindPopup('Gordon College ANNEX Campus');

        // Fit map to show both markers
        const bounds = L.latLngBounds([mainLatLng, annexLatLng]);
        map.fitBounds(bounds, { padding: [40, 40] });

        // Location selection logic
        const locationOptions = document.getElementById('locationOptions');
        locationOptions.addEventListener('click', function(e) {
            if (e.target.classList.contains('location-option')) {
                Array.from(locationOptions.children).forEach(opt => opt.classList.remove('selected'));
                e.target.classList.add('selected');
                let lat, lng;
                // If Gordon College Main Campus button is clicked, use annexLatLng coordinates
                if (e.target.textContent.trim() === "Gordon College Main Campus") {
                    lat = annexLatLng[0];
                    lng = annexLatLng[1];
                } else {
                    lat = parseFloat(e.target.getAttribute('data-lat'));
                    lng = parseFloat(e.target.getAttribute('data-lng'));
                }
                map.setView([lat, lng], 17);
                if (lat === mainLatLng[0] && lng === mainLatLng[1]) {
                    mainMarker.openPopup();
                } else if (lat === annexLatLng[0] && lng === annexLatLng[1]) {
                    annexMarker.openPopup();
                }
            }
        });
    </script>
</body>
</html>
